<!DOCTYPE html><html><head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<title>Data Change Notification Callbacks</title>
<!-- path=../ -->
</head>
<body>

<script>
function toggle_div(nm) {
var w = document.getElementById(nm);
if( w.style.display=="block" ){
w.style.display = "none";
}else{
w.style.display = "block";
}
}
function toggle_search() {
var w = document.getElementById("searchmenu");
if( w.style.display=="block" ){
w.style.display = "none";
} else {
w.style.display = "block";
setTimeout(function(){
document.getElementById("searchbox").focus()
}, 30);
}
}
function div_off(nm){document.getElementById(nm).style.display="none";}
window.onbeforeunload = function(e){div_off("submenu");}
/* Disable the Search feature if we are not operating from CGI, since */
/* Search is accomplished using CGI and will not work without it. */
if( !location.origin || !location.origin.match || !location.origin.match(/http/) ){
document.getElementById("search_menubutton").style.display = "none";
}
/* Used by the Hide/Show button beside syntax diagrams, to toggle the */
function hideorshow(btn,obj){
var x = document.getElementById(obj);
var b = document.getElementById(btn);
if( x.style.display!='none' ){
x.style.display = 'none';
b.innerHTML='show';
}else{
x.style.display = '';
b.innerHTML='hide';
}
return false;
}
var antiRobot = 0;
function antiRobotGo(){
if( antiRobot!=3 ) return;
antiRobot = 7;
var j = document.getElementById("mtimelink");
if(j && j.hasAttribute("data-href")) j.href=j.getAttribute("data-href");
}
function antiRobotDefense(){
document.body.onmousedown=function(){
antiRobot |= 2;
antiRobotGo();
document.body.onmousedown=null;
}
document.body.onmousemove=function(){
antiRobot |= 2;
antiRobotGo();
document.body.onmousemove=null;
}
setTimeout(function(){
antiRobot |= 1;
antiRobotGo();
}, 100)
antiRobotGo();
}
antiRobotDefense();
</script>
<!-- keywords: sqlite3_update_hook -->

<blockquote><pre>void *sqlite3_update_hook(
  sqlite3*,
  void(*)(void *,int ,char const *,char const *,sqlite3_int64),
  void*
);
</pre></blockquote>
<p>
The sqlite3_update_hook() interface registers a callback function
with the <a href="sqlite3.htm">database connection</a> identified by the first argument
to be invoked whenever a row is updated, inserted or deleted in
a <a href="../rowidtable.html">rowid table</a>.
Any callback set by a previous call to this function
for the same database connection is overridden.</p>

<p>The second argument is a pointer to the function to invoke when a
row is updated, inserted or deleted in a rowid table.
The update hook is disabled by invoking sqlite3_update_hook()
with a NULL pointer as the second parameter.
The first argument to the callback is a copy of the third argument
to sqlite3_update_hook().
The second callback argument is one of <a href="c_alter_table.htm">SQLITE_INSERT</a>, <a href="c_alter_table.htm">SQLITE_DELETE</a>,
or <a href="c_alter_table.htm">SQLITE_UPDATE</a>, depending on the operation that caused the callback
to be invoked.
The third and fourth arguments to the callback contain pointers to the
database and table name containing the affected row.
The final callback parameter is the <a href="../lang_createtable.html#rowid">rowid</a> of the row.
In the case of an update, this is the <a href="../lang_createtable.html#rowid">rowid</a> after the update takes place.</p>

<p>The update hook is not invoked when internal system tables are
modified (i.e. sqlite_sequence).
The update hook is not invoked when <a href="../withoutrowid.html">WITHOUT ROWID</a> tables are modified.</p>

<p>In the current implementation, the update hook
is not invoked when conflicting rows are deleted because of an
<a href="../lang_conflict.html">ON CONFLICT REPLACE</a> clause.  Nor is the update hook
invoked when rows are deleted using the <a href="../lang_delete.html#truncateopt">truncate optimization</a>.
The exceptions defined in this paragraph might change in a future
release of SQLite.</p>

<p>Whether the update hook is invoked before or after the
corresponding change is currently unspecified and may differ
depending on the type of change. Do not rely on the order of the
hook call with regards to the final result of the operation which
triggers the hook.</p>

<p>The update hook implementation must not do anything that will modify
the database connection that invoked the update hook.  Any actions
to modify the database connection must be deferred until after the
completion of the <a href="step.htm">sqlite3_step()</a> call that triggered the update hook.
Note that <a href="prepare.htm">sqlite3_prepare_v2()</a> and <a href="step.htm">sqlite3_step()</a> both modify their
database connections for the meaning of "modify" in this paragraph.</p>

<p>The sqlite3_update_hook(D,C,P) function
returns the P argument from the previous call
on the same <a href="sqlite3.htm">database connection</a> D, or NULL for
the first call on D.</p>

<p>See also the <a href="commit_hook.htm">sqlite3_commit_hook()</a>, <a href="commit_hook.htm">sqlite3_rollback_hook()</a>,
and <a href="preupdate_blobwrite.htm">sqlite3_preupdate_hook()</a> interfaces.
</p><p>See also lists of
  <a href="objlist.htm">Objects</a>,
  <a href="constlist.htm">Constants</a>, and
  <a href="funclist.htm">Functions</a>.</p>

</body></html>